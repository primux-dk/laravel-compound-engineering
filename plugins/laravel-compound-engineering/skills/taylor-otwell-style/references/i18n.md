# Internationalization - Taylor Otwell Style

<core_principle>
## Core Requirement

**All user-facing text MUST use Laravel's translation system.** No hardcoded strings.

```php
// Always use translation functions
__('Welcome to our application')
__('Hello, :name!', ['name' => $user->name])

// In Blade
{{ __('Welcome to our application') }}
```
</core_principle>

<json_translations>
## JSON Translation Files

Taylor prefers JSON translation files for readability:

```
lang/
├── en.json         # English (default)
├── da.json         # Danish
├── de.json         # German
└── en/             # Laravel's built-in
    ├── auth.php
    ├── pagination.php
    └── validation.php
```

**lang/en.json:**
```json
{
    "Welcome to our application": "Welcome to our application",
    "Hello, :name!": "Hello, :name!",
    "User created successfully": "User created successfully",
    "The email address is required": "The email address is required",
    "Password must be at least :min characters": "Password must be at least :min characters"
}
```

**lang/da.json:**
```json
{
    "Welcome to our application": "Velkommen til vores applikation",
    "Hello, :name!": "Hej, :name!",
    "User created successfully": "Bruger oprettet succesfuldt"
}
```
</json_translations>

<usage_patterns>
## Usage Patterns

**Basic translation:**
```php
__('Welcome to our application')
__('Hello, :name!', ['name' => $user->name])
```

**Pluralization:**
```php
trans_choice('{0} No messages|{1} One message|[2,*] :count messages', $count)
```

**In Controllers:**
```php
public function store(UserRequest $request, CreateUser $action)
{
    $user = $action->handle($request->validated());

    return redirect()
        ->route('users.show', $user)
        ->with('success', __('User created successfully'));
}
```

**In Form Requests:**
```php
class UserRequest extends FormRequest
{
    public function messages(): array
    {
        return [
            'email.required' => __('The email address is required'),
            'email.unique' => __('This email address is already registered'),
        ];
    }
}
```

**In Notifications:**
```php
public function toMail($notifiable): MailMessage
{
    return (new MailMessage)
        ->subject(__('Your order has been shipped'))
        ->greeting(__('Hello, :name!', ['name' => $notifiable->name]))
        ->line(__('Your order #:number has been shipped.', ['number' => $this->order->number]))
        ->action(__('Track Order'), route('orders.show', $this->order));
}
```
</usage_patterns>

<javascript_integration>
## JavaScript Integration

**Pass translations to frontend:**
```blade
<script>
    window.translations = @json([
        'loading' => __('Loading...'),
        'success' => __('Operation completed successfully'),
        'error' => __('An error occurred'),
        'confirm_delete' => __('Are you sure you want to delete this item?'),
    ]);
</script>
```

**Use in Alpine.js:**
```blade
<div x-data="{ message: window.translations.loading }">
    <span x-text="message"></span>
</div>
```
</javascript_integration>

<locale_management>
## Locale Management

**Middleware pattern:**
```php
class SetLocale
{
    public function handle($request, Closure $next)
    {
        $locale = $request->user()->locale
            ?? $request->getPreferredLanguage(['en', 'da', 'de'])
            ?? config('app.locale');

        App::setLocale($locale);

        return $next($request);
    }
}
```

**In controller:**
```php
public function changeLocale(Request $request)
{
    $request->validate(['locale' => 'required|in:en,da,de']);
    $request->user()->update(['locale' => $request->locale]);

    return back()->with('success', __('Language changed successfully'));
}
```
</locale_management>

<date_formatting>
## Date and Number Formatting

**Carbon localization:**
```php
Carbon::setLocale(App::getLocale());

// In Blade
{{ $user->created_at->diffForHumans() }}  // "2 hours ago" or "2 timer siden"
{{ $user->created_at->translatedFormat('d F Y') }}  // "30 January 2025"
```

**Number formatting (Laravel 10+):**
```php
use Illuminate\Support\Number;

Number::format(1234.56);     // "1,234.56" locale-aware
Number::currency(1234.56);   // "$1,234.56" locale-aware
Number::percentage(0.85);    // "85%"
```
</date_formatting>

<best_practices>
## Best Practices

**Use readable strings (not keys):**
```php
// Good - readable, self-documenting
__('Welcome to our application')
__('Your order has been shipped')

// Bad - requires lookup
__('app.welcome')
__('order.shipped')
```

**Use parameters, not concatenation:**
```php
// Good
__('Hello, :name!', ['name' => $user->name])

// Bad
__('Hello') . ', ' . $user->name . '!'
```

**Common UI translations to always include:**
```json
{
    "Yes": "Yes",
    "No": "No",
    "Cancel": "Cancel",
    "Save": "Save",
    "Delete": "Delete",
    "Edit": "Edit",
    "Loading...": "Loading...",
    "Error": "Error",
    "Success": "Success",
    "Are you sure?": "Are you sure?",
    "No results found": "No results found"
}
```
</best_practices>
